{"ast":null,"code":"var _jsxFileName = \"/Users/oliverxu/Desktop/CS/BGI/client-react/ecom-client/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { Router, Route, Link, Switch, Redirect } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport { HomePage } from './components/home/HomePage';\nimport { LoginPage } from './components/login/LoginPage';\nimport { RegisterPage } from './components/register/RegisterPage';\nimport { ProfilePage } from './components/profile/ProfilePage';\nimport { DetailPage } from './components/detail/DetailPage';\nimport { AdminPage } from './components/admin/AdminPage';\nimport { NotFound } from './components/errors/NotFound';\nimport { Unauthorized } from './components/errors/Unauthorized';\nimport AuthGuard from './guards/AuthGuard';\nimport { Role } from './models/role';\nimport UserService from './services/user.service';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faUserPlus, faSignInAlt, faHome, faSignOutAlt, faUserShield } from '@fortawesome/free-solid-svg-icons';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: createBrowserHistory(),\n      currentUser: null,\n      isAdmin: false,\n      currentLocation: window.location.pathname\n    };\n  }\n\n  componentWillMount() {\n    this.unlisten = this.state.history.listen((location, action) => {\n      this.setState({\n        currentLocation: location.pathname\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data,\n        isAdmin: data && data.role === Role.ADMIN\n      });\n    });\n  }\n\n  logout() {\n    UserService.logOut().then(data => {\n      this.state.history.push('/home');\n    }, error => {\n      this.setState({\n        errorMessage: \"Unexpected error occurred\"\n      });\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          currentUser = _this$state.currentUser,\n          isAdmin = _this$state.isAdmin,\n          history = _this$state.history,\n          currentLocation = _this$state.currentLocation;\n    return React.createElement(Router, {\n      history: history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, this.state.currentUser && React.createElement(\"nav\", {\n      className: \"navbar navbar-expand navbar-dark bg-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"navbar-brand\",\n      href: \"https://reactjs.org\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), \"React\"), React.createElement(\"div\", {\n      className: \"navbar-nav mr-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/home\",\n      className: currentLocation === '/home' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faHome,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), \" Home\"), this.state.isAdmin && React.createElement(Link, {\n      to: \"/admin\",\n      className: currentLocation === '/admin' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faUserShield,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), \" Admin\")), React.createElement(\"div\", {\n      className: \"navbar-nav ml-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/profile\",\n      className: currentLocation === '/profile' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), \" \", currentUser.name), React.createElement(\"a\", {\n      onClick: () => this.logout(),\n      className: \"nav-item nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faSignOutAlt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), \" LogOut\"))), !this.state.currentUser && React.createElement(\"nav\", {\n      className: \"navbar navbar-expand navbar-dark bg-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"navbar-brand\",\n      href: \"https://reactjs.org\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), \"React\"), React.createElement(\"div\", {\n      className: \"navbar-nav mr-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/home\",\n      className: currentLocation === '/home' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faHome,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), \" Home\")), React.createElement(\"div\", {\n      className: \"navbar-nav ml-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/register\",\n      className: currentLocation === '/register' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faUserPlus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), \" Register\"), React.createElement(Link, {\n      to: \"/login\",\n      className: currentLocation === '/login' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faSignInAlt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), \" Login\"))), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: HomePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/home\",\n      component: HomePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: LoginPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      component: RegisterPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(AuthGuard, {\n      path: \"/profile\",\n      roles: [Role.ADMIN, Role.USER],\n      component: ProfilePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/detail/:id\",\n      component: DetailPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(AuthGuard, {\n      path: \"/admin\",\n      roles: [Role.ADMIN],\n      component: AdminPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/404\",\n      component: NotFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/401\",\n      component: Unauthorized,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      from: \"*\",\n      to: \"/404\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/oliverxu/Desktop/CS/BGI/client-react/ecom-client/src/App.js"],"names":["React","Router","Route","Link","Switch","Redirect","createBrowserHistory","HomePage","LoginPage","RegisterPage","ProfilePage","DetailPage","AdminPage","NotFound","Unauthorized","AuthGuard","Role","UserService","FontAwesomeIcon","faUser","faUserPlus","faSignInAlt","faHome","faSignOutAlt","faUserShield","App","Component","constructor","props","state","history","currentUser","isAdmin","currentLocation","window","location","pathname","componentWillMount","unlisten","listen","action","setState","componentWillUnmount","componentDidMount","subscribe","data","role","ADMIN","logout","logOut","then","push","error","errorMessage","render","logo","name","USER"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport {Router, Route, Link, Switch, Redirect} from 'react-router-dom';\nimport {createBrowserHistory} from 'history';\n\nimport {HomePage} from './components/home/HomePage';\nimport {LoginPage} from './components/login/LoginPage';\nimport {RegisterPage} from './components/register/RegisterPage';\nimport {ProfilePage} from './components/profile/ProfilePage';\nimport {DetailPage} from './components/detail/DetailPage';\nimport {AdminPage} from './components/admin/AdminPage';\nimport {NotFound} from './components/errors/NotFound';\nimport {Unauthorized} from './components/errors/Unauthorized';\n\nimport AuthGuard from './guards/AuthGuard';\nimport {Role} from './models/role';\n\nimport UserService from './services/user.service';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faUser, faUserPlus, faSignInAlt, faHome, faSignOutAlt, faUserShield} from '@fortawesome/free-solid-svg-icons';\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n\n    this.state = {\n      history: createBrowserHistory(),\n      currentUser: null,\n      isAdmin: false,\n      currentLocation: window.location.pathname\n    };\n  }\n\n  componentWillMount() {\n    this.unlisten = this.state.history.listen((location, action) => {\n      this.setState({currentLocation: location.pathname})\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data,\n        isAdmin: data && data.role === Role.ADMIN\n      })\n    });\n  }\n\n  logout() {\n    UserService.logOut()\n    .then(\n      data => {\n        this.state.history.push('/home');\n      },\n      error => {\n        this.setState({\n          errorMessage: \"Unexpected error occurred\"\n        });\n      }\n    );\n  }\n\n  render(){\n    const {currentUser, isAdmin, history, currentLocation} = this.state;\n    return (\n        <Router history={history}>\n          <div>\n          {this.state.currentUser &&\n            <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n              <a className=\"navbar-brand\" href=\"https://reactjs.org\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\"/>\n                React\n              </a>\n              <div className=\"navbar-nav mr-auto\">\n                <Link to=\"/home\" className={currentLocation === '/home' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faHome}/> Home</Link>\n                {this.state.isAdmin && <Link to=\"/admin\" className={currentLocation === '/admin' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faUserShield}/> Admin</Link>}\n              </div>\n\n              <div className=\"navbar-nav ml-auto\">\n                <Link to=\"/profile\" className={currentLocation === '/profile' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faUser}/> {currentUser.name}</Link>\n                <a onClick={()=>this.logout()} className=\"nav-item nav-link\"><FontAwesomeIcon icon={faSignOutAlt}/> LogOut</a>\n              </div>\n            </nav>\n          }\n\n          {!this.state.currentUser &&\n            <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n              <a className=\"navbar-brand\" href=\"https://reactjs.org\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\"/>\n                React\n              </a>\n              <div className=\"navbar-nav mr-auto\">\n                <Link to=\"/home\" className={currentLocation === '/home' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faHome}/> Home</Link>\n              </div>\n\n              <div className=\"navbar-nav ml-auto\">\n                <Link to=\"/register\" className={currentLocation === '/register' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faUserPlus}/> Register</Link>\n                <Link to=\"/login\" className={currentLocation === '/login' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faSignInAlt}/> Login</Link>\n              </div>\n            </nav>\n          }\n          <div className=\"container\">\n            <Switch>\n              <Route exact path=\"/\" component={HomePage}/>\n              <Route exact path=\"/home\" component={HomePage}/>\n              <Route exact path=\"/login\" component={LoginPage}/>\n              <Route exact path=\"/register\" component={RegisterPage}/>\n              <AuthGuard path=\"/profile\" roles={[Role.ADMIN, Role.USER]} component={ProfilePage}/>\n              <Route exact path=\"/detail/:id\" component={DetailPage}/>\n              <AuthGuard path=\"/admin\" roles={[Role.ADMIN]} component={AdminPage}/>\n              <Route exact path=\"/404\" component={NotFound}/>\n              <Route exact path=\"/401\" component={Unauthorized}/>\n              <Redirect from='*' to='/404' />\n            </Switch>\n          </div>\n          </div>\n        </Router>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}