{"ast":null,"code":"var _jsxFileName = \"/Users/oliverxu/Desktop/CS/BGI/client-react/ecom-client/src/components/admin/AdminPage.jsx\";\nimport React from 'react';\nimport './AdminPage.css';\nimport AdminService from '../../services/admin.service';\nimport UserService from '../../services/user.service';\nimport { User } from '../../models/user';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPen, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { UserModal } from '../modals/UserModal';\nimport { DeleteModal } from '../modals/DeleteModal';\n\nclass AdminPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUser: new User(),\n      users: [],\n      errorMessage: '',\n      infoMessage: '',\n      showModal: false,\n      showDeleteModal: false\n    }; //(user, isSucceed, isUpdate)=>this.onChildUpdate(user, isSucceed, isUpdate);\n    //this.onChildUpdate = this.onChildUpdate.bind(this);\n    //this.onDeleteChildUpdate = this.onDeleteChildUpdate.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      users: {\n        loading: true\n      }\n    });\n    AdminService.findAllUsers().then(users => {\n      console.log(users);\n      this.setState({\n        users: users.data\n      });\n    });\n  }\n\n  createUserRequest() {\n    this.setState({\n      selectedUser: new User('', '', '', '', -1)\n    });\n    this.setState({\n      showModal: true\n    });\n  }\n\n  editUserRequest(user) {\n    console.log(user);\n    this.setState({\n      selectedUser: user\n    });\n    this.setState({\n      showModal: true\n    });\n  }\n\n  deleteUserRequest(user) {\n    console.log(user);\n    this.setState({\n      selectedUser: user\n    });\n    this.setState({\n      showDeleteModal: true\n    });\n  }\n\n  handleModalCloseClick() {\n    this.setState({\n      showModal: false\n    });\n  }\n\n  handleDeleteModalCloseClick() {\n    console.log(\"closed\");\n    this.setState({\n      showDeleteModal: false\n    });\n  }\n\n  onDeleteChildUpdate(user, isSucceed) {\n    if (!isSucceed) {\n      return;\n    }\n\n    var userList = this.state.users;\n    let itemIndex = userList.findIndex(item => item.id === user.id);\n\n    if (itemIndex !== -1) {\n      userList.splice(itemIndex, 1);\n      this.setState({\n        users: userList,\n        infoMessage: 'Mission is completed.'\n      });\n    }\n  }\n\n  onChildUpdate(user1, isSucceed, isUpdate) {\n    console.log(user1);\n\n    if (!isSucceed) {\n      return;\n    } else {\n      this.saveUser(user1, isUpdate);\n      this.setState({\n        infoMessage: 'Mission is completed.'\n      });\n    }\n  }\n\n  saveUser(user, isUpdate) {\n    if (!isUpdate) {\n      this.createUser(user);\n    } else {\n      this.updateUser(user);\n    }\n  }\n\n  createUser(user) {\n    var users = this.state.users;\n    users.push(user);\n    this.setState({\n      users: users\n    });\n  }\n\n  updateUser(user) {\n    var userList = this.state.users;\n    let itemIndex = userList.findIndex(item => item.id === user.id);\n    userList[itemIndex] = user;\n  }\n\n  render() {\n    const _this$state = this.state,\n          user = _this$state.user,\n          users = _this$state.users,\n          infoMessage = _this$state.infoMessage;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, infoMessage && React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Successful!\"), \" \", infoMessage, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\xD7\"))), users.loading && React.createElement(\"em\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Loading users...\"), this.state.users.length && React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col col-xs-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"panel-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"All Users\")), React.createElement(\"div\", {\n      className: \"col col-xs-6 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: () => this.createUserRequest(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Create New User\")))), React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-striped\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"#\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"UserName\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Role\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Action\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, users.map((user, index) => React.createElement(\"tr\", {\n      key: user.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, index), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, user.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, user.username), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, user.role), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: () => this.editUserRequest(user),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faPen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-danger\",\n      onClick: () => this.deleteUserRequest(user),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    })))))))))), this.state.showModal ? React.createElement(UserModal, {\n      ref: \"child\",\n      onChildUpdate: (user, isSucceed, isUpdate) => this.onChildUpdate(user, isSucceed, isUpdate),\n      handleModalCloseClick: () => this.handleModalCloseClick(),\n      user: this.state.selectedUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }) : null, this.state.showDeleteModal ? React.createElement(DeleteModal, {\n      ref: \"deleteChild\",\n      onDeleteChildUpdate: (user, isSucceed) => this.onDeleteChildUpdate(user, isSucceed),\n      handleDeleteModalCloseClick: () => this.handleDeleteModalCloseClick(),\n      user: this.state.selectedUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }) : null);\n  }\n\n}\n\nexport { AdminPage };","map":{"version":3,"sources":["/Users/oliverxu/Desktop/CS/BGI/client-react/ecom-client/src/components/admin/AdminPage.jsx"],"names":["React","AdminService","UserService","User","FontAwesomeIcon","faPen","faTrashAlt","UserModal","DeleteModal","AdminPage","Component","constructor","props","state","selectedUser","users","errorMessage","infoMessage","showModal","showDeleteModal","componentDidMount","setState","loading","findAllUsers","then","console","log","data","createUserRequest","editUserRequest","user","deleteUserRequest","handleModalCloseClick","handleDeleteModalCloseClick","onDeleteChildUpdate","isSucceed","userList","itemIndex","findIndex","item","id","splice","onChildUpdate","user1","isUpdate","saveUser","createUser","updateUser","push","render","length","map","index","name","username","role"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,iBAAP;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,SAAQC,IAAR,QAAmB,mBAAnB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,KAAT,EAAgBC,UAAhB,QAAkC,mCAAlC;AACA,SAAQC,SAAR,QAAwB,qBAAxB;AACA,SAAQC,WAAR,QAA0B,uBAA1B;;AAEA,MAAMC,SAAN,SAAwBT,KAAK,CAACU,SAA9B,CAAwC;AAEtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,YAAY,EAAE,IAAIX,IAAJ,EADH;AAETY,MAAAA,KAAK,EAAE,EAFE;AAGXC,MAAAA,YAAY,EAAE,EAHH;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAKTC,MAAAA,SAAS,EAAE,KALF;AAMTC,MAAAA,eAAe,EAAE;AANR,KAAb,CAHe,CAYf;AACA;AACA;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,SAAKC,QAAL,CAAc;AACVN,MAAAA,KAAK,EAAE;AAAEO,QAAAA,OAAO,EAAE;AAAX;AADG,KAAd;AAGArB,IAAAA,YAAY,CAACsB,YAAb,GACCC,IADD,CACMT,KAAK,IAAI;AACbU,MAAAA,OAAO,CAACC,GAAR,CAAYX,KAAZ;AACA,WAAKM,QAAL,CAAc;AAAEN,QAAAA,KAAK,EAAEA,KAAK,CAACY;AAAf,OAAd;AACD,KAJD;AAKH;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKP,QAAL,CAAc;AAAEP,MAAAA,YAAY,EAAE,IAAIX,IAAJ,CAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,EAAkB,EAAlB,EAAqB,CAAC,CAAtB;AAAhB,KAAd;AACA,SAAKkB,QAAL,CAAc;AACZH,MAAAA,SAAS,EAAE;AADC,KAAd;AAGD;;AAEDW,EAAAA,eAAe,CAACC,IAAD,EAAO;AACpBL,IAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ;AACA,SAAKT,QAAL,CAAc;AAAEP,MAAAA,YAAY,EAAEgB;AAAhB,KAAd;AACA,SAAKT,QAAL,CAAc;AACZH,MAAAA,SAAS,EAAE;AADC,KAAd;AAGD;;AAEDa,EAAAA,iBAAiB,CAACD,IAAD,EAAM;AACrBL,IAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ;AACA,SAAKT,QAAL,CAAc;AAAEP,MAAAA,YAAY,EAAEgB;AAAhB,KAAd;AACA,SAAKT,QAAL,CAAc;AACZF,MAAAA,eAAe,EAAE;AADL,KAAd;AAGD;;AAEDa,EAAAA,qBAAqB,GAAG;AACtB,SAAKX,QAAL,CAAc;AACZH,MAAAA,SAAS,EAAE;AADC,KAAd;AAGD;;AAEDe,EAAAA,2BAA2B,GAAG;AAC5BR,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,SAAKL,QAAL,CAAc;AACZF,MAAAA,eAAe,EAAE;AADL,KAAd;AAGD;;AAEDe,EAAAA,mBAAmB,CAACJ,IAAD,EAAOK,SAAP,EAAiB;AAClC,QAAG,CAACA,SAAJ,EAAc;AACZ;AACD;;AACD,QAAIC,QAAQ,GAAG,KAAKvB,KAAL,CAAWE,KAA1B;AACA,QAAIsB,SAAS,GAAGD,QAAQ,CAACE,SAAT,CAAmBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYV,IAAI,CAACU,EAA5C,CAAhB;;AACA,QAAGH,SAAS,KAAK,CAAC,CAAlB,EAAoB;AAClBD,MAAAA,QAAQ,CAACK,MAAT,CAAgBJ,SAAhB,EAA2B,CAA3B;AACA,WAAKhB,QAAL,CAAc;AACZN,QAAAA,KAAK,EAAEqB,QADK;AAElBnB,QAAAA,WAAW,EAAE;AAFK,OAAd;AAID;AAEF;;AAEDyB,EAAAA,aAAa,CAACC,KAAD,EAAQR,SAAR,EAAmBS,QAAnB,EAA4B;AACvCnB,IAAAA,OAAO,CAACC,GAAR,CAAYiB,KAAZ;;AACA,QAAG,CAACR,SAAJ,EAAc;AACZ;AACD,KAFD,MAEK;AACH,WAAKU,QAAL,CAAcF,KAAd,EAAqBC,QAArB;AACA,WAAKvB,QAAL,CAAc;AACZJ,QAAAA,WAAW,EAAE;AADD,OAAd;AAGD;AACF;;AAED4B,EAAAA,QAAQ,CAACf,IAAD,EAAOc,QAAP,EAAgB;AACtB,QAAG,CAACA,QAAJ,EAAa;AACX,WAAKE,UAAL,CAAgBhB,IAAhB;AACD,KAFD,MAEK;AACH,WAAKiB,UAAL,CAAgBjB,IAAhB;AACD;AACF;;AAEDgB,EAAAA,UAAU,CAAChB,IAAD,EAAM;AACd,QAAIf,KAAK,GAAG,KAAKF,KAAL,CAAWE,KAAvB;AACAA,IAAAA,KAAK,CAACiC,IAAN,CAAWlB,IAAX;AACA,SAAKT,QAAL,CAAc;AACZN,MAAAA,KAAK,EAAEA;AADK,KAAd;AAGD;;AAEDgC,EAAAA,UAAU,CAACjB,IAAD,EAAM;AACd,QAAIM,QAAQ,GAAG,KAAKvB,KAAL,CAAWE,KAA1B;AACA,QAAIsB,SAAS,GAAGD,QAAQ,CAACE,SAAT,CAAmBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYV,IAAI,CAACU,EAA5C,CAAhB;AACAJ,IAAAA,QAAQ,CAACC,SAAD,CAAR,GAAsBP,IAAtB;AACD;;AAEDmB,EAAAA,MAAM,GAAG;AAAA,wBACgC,KAAKpC,KADrC;AAAA,UACGiB,IADH,eACGA,IADH;AAAA,UACSf,KADT,eACSA,KADT;AAAA,UACgBE,WADhB,eACgBA,WADhB;AAEL,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKA,WAAW,IACV;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,OACgCA,WADhC,EAEE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,OAAhC;AAAwC,sBAAa,OAArD;AAA6D,oBAAW,OAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,qBAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAFF,CAFN,EASKF,KAAK,CAACO,OAAN,IAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BATtB,EAUK,KAAKT,KAAL,CAAWE,KAAX,CAAiBmC,MAAjB,IACC;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF,EAIE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,iBAAhC;AAAkD,MAAA,OAAO,EAAE,MAAM,KAAKtB,iBAAL,EAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,CAJF,CADF,CADF,EAYE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,SAAS,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,EAEE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAGE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,EAIE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,EAKE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,CADF,CADA,EAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACCb,KAAK,CAACoC,GAAN,CAAU,CAACrB,IAAD,EAAOsB,KAAP,KACT;AAAI,MAAA,GAAG,EAAEtB,IAAI,CAACU,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiBY,KAAjB,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKtB,IAAI,CAACuB,IAAV,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKvB,IAAI,CAACwB,QAAV,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKxB,IAAI,CAACyB,IAAV,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAoC,MAAA,OAAO,EAAE,MAAM,KAAK1B,eAAL,CAAqBC,IAArB,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+E,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAEzB,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/E,CADF,EAEE;AAAQ,MAAA,SAAS,EAAC,gBAAlB;AAAmC,MAAA,OAAO,EAAE,MAAM,KAAK0B,iBAAL,CAAuBD,IAAvB,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgF,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAExB,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAhF,CAFF,CALF,CADD,CADD,CAVA,CADF,CAZF,CAXN,CADF,EAsDG,KAAKO,KAAL,CAAWK,SAAX,GAAwB,oBAAC,SAAD;AAAW,MAAA,GAAG,EAAC,OAAf;AAAuB,MAAA,aAAa,EAAE,CAACY,IAAD,EAAOK,SAAP,EAAkBS,QAAlB,KAA6B,KAAKF,aAAL,CAAmBZ,IAAnB,EAAyBK,SAAzB,EAAoCS,QAApC,CAAnE;AAAkH,MAAA,qBAAqB,EAAE,MAAI,KAAKZ,qBAAL,EAA7I;AAA2K,MAAA,IAAI,EAAE,KAAKnB,KAAL,CAAWC,YAA5L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxB,GAAuO,IAtD1O,EAuDG,KAAKD,KAAL,CAAWM,eAAX,GAA8B,oBAAC,WAAD;AAAa,MAAA,GAAG,EAAC,aAAjB;AAA+B,MAAA,mBAAmB,EAAE,CAACW,IAAD,EAAOK,SAAP,KAAmB,KAAKD,mBAAL,CAAyBJ,IAAzB,EAA+BK,SAA/B,CAAvE;AAAkH,MAAA,2BAA2B,EAAE,MAAI,KAAKF,2BAAL,EAAnJ;AAAuL,MAAA,IAAI,EAAE,KAAKpB,KAAL,CAAWC,YAAxM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9B,GAAyP,IAvD5P,CADF;AA2DH;;AAjLqC;;AAsLxC,SAASL,SAAT","sourcesContent":["import React from 'react';\nimport './AdminPage.css';\nimport AdminService from '../../services/admin.service';\nimport UserService from '../../services/user.service';\nimport {User} from '../../models/user';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPen, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport {UserModal} from '../modals/UserModal';\nimport {DeleteModal} from '../modals/DeleteModal';\n\nclass AdminPage extends React.Component {\n\n  constructor(props) {\n      super(props);\n\n      this.state = {\n\t\t      selectedUser: new User(),\n          users: [],\n\t\t      errorMessage: '',\n\t\t      infoMessage: '',\n          showModal: false,\n          showDeleteModal: false,\n      };\n\n      //(user, isSucceed, isUpdate)=>this.onChildUpdate(user, isSucceed, isUpdate);\n      //this.onChildUpdate = this.onChildUpdate.bind(this);\n      //this.onDeleteChildUpdate = this.onDeleteChildUpdate.bind(this);\n  }\n\n  componentDidMount() {\n      this.setState({\n          users: { loading: true },\n      });\n      AdminService.findAllUsers()\n      .then(users => {\n        console.log(users);\n        this.setState({ users: users.data });\n      });\n  }\n\n  createUserRequest() {\n    this.setState({ selectedUser: new User('','','','',-1) });\n    this.setState({\n      showModal: true\n    });\n  }\n\n  editUserRequest(user) {\n    console.log(user);\n    this.setState({ selectedUser: user });\n    this.setState({\n      showModal: true\n    });\n  }\n\n  deleteUserRequest(user){\n    console.log(user);\n    this.setState({ selectedUser: user });\n    this.setState({\n      showDeleteModal: true\n    });\n  }\n\n  handleModalCloseClick() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  handleDeleteModalCloseClick() {\n    console.log(\"closed\");\n    this.setState({\n      showDeleteModal: false\n    })\n  }\n\n  onDeleteChildUpdate(user, isSucceed){\n    if(!isSucceed){\n      return;\n    }\n    var userList = this.state.users;\n    let itemIndex = userList.findIndex(item => item.id === user.id);\n    if(itemIndex !== -1){\n      userList.splice(itemIndex, 1);\n      this.setState({\n        users: userList,\n\t\tinfoMessage: 'Mission is completed.'\n      });\n    }\n\n  }\n\n  onChildUpdate(user1, isSucceed, isUpdate){\n    console.log(user1);\n    if(!isSucceed){\n      return;\n    }else{\n      this.saveUser(user1, isUpdate);\n      this.setState({\n        infoMessage: 'Mission is completed.'\n      });\n    }\n  }\n\n  saveUser(user, isUpdate){\n    if(!isUpdate){\n      this.createUser(user);\n    }else{\n      this.updateUser(user);\n    }\n  }\n\n  createUser(user){\n    var users = this.state.users;\n    users.push(user);\n    this.setState({\n      users: users\n    });\n  }\n\n  updateUser(user){\n    var userList = this.state.users;\n    let itemIndex = userList.findIndex(item => item.id === user.id);\n    userList[itemIndex] = user;\n  }\n\n  render() {\n      const { user, users, infoMessage } = this.state;\n      return (\n        <div>\n          <div className=\"col-md-12\">\n              {infoMessage &&\n                <div className=\"alert alert-success\">\n                  <strong>Successful!</strong> {infoMessage}\n                  <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n              }\n              {users.loading && <em>Loading users...</em>}\n              {this.state.users.length &&\n                <div className=\"card\">\n                  <div className=\"card-header\">\n                    <div className=\"row\">\n                      <div className=\"col col-xs-6\">\n                        <h3 className=\"panel-title\">All Users</h3>\n                      </div>\n                      <div className=\"col col-xs-6 text-right\">\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.createUserRequest()}>Create New User</button>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"card-body\">\n                    <table className=\"table table-striped\">\n                    <thead>\n                      <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Name</th>\n                        <th scope=\"col\">UserName</th>\n                        <th scope=\"col\">Role</th>\n                        <th scope=\"col\">Action</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                    {users.map((user, index) =>\n                      <tr key={user.id}>\n                        <th scope=\"row\">{index}</th>\n                        <td>{user.name}</td>\n                        <td>{user.username}</td>\n                        <td>{user.role}</td>\n                        <td>\n                          <button className=\"btn btn-warning\" onClick={() => this.editUserRequest(user)}><FontAwesomeIcon icon={faPen} /></button>\n                          <button className=\"btn btn-danger\" onClick={() => this.deleteUserRequest(user)}><FontAwesomeIcon icon={faTrashAlt} /></button>\n                        </td>\n                      </tr>\n                    )}\n                    </tbody>\n                    </table>\n                  </div>\n                </div>\n              }\n          </div>\n          {this.state.showModal ? (<UserModal ref=\"child\" onChildUpdate={(user, isSucceed, isUpdate)=>this.onChildUpdate(user, isSucceed, isUpdate)} handleModalCloseClick={()=>this.handleModalCloseClick()} user={this.state.selectedUser}/>) : null}\n          {this.state.showDeleteModal ? (<DeleteModal ref=\"deleteChild\" onDeleteChildUpdate={(user, isSucceed)=>this.onDeleteChildUpdate(user, isSucceed)} handleDeleteModalCloseClick={()=>this.handleDeleteModalCloseClick()} user={this.state.selectedUser}/>) : null}\n        </div>\n      );\n  }\n\n}\n\n\nexport { AdminPage };\n"]},"metadata":{},"sourceType":"module"}